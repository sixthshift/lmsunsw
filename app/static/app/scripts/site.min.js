function refresh_confidence(n){$("#progress-bar-good").attr("style","width: "+n.good+"%"),$("#progress-bar-neutral").attr("style","width: "+n.neutral+"%"),$("#progress-bar-bad").attr("style","width: "+n.bad+"%"),$("#good-btn").html(1==n.current?"good<span class='glyphicon glyphicon-ok'></span>":"good"),$("#neutral-btn").html(0==n.current?"neutral<span class='glyphicon glyphicon-ok'></span>":"neutral"),$("#bad-btn").html(-1==n.current?"bad<span class='glyphicon glyphicon-ok'></span>":"bad")}function student_poll(n){$.ajax({type:"GET",url:"/student_poll/",dataType:"json",data:{quiz_length:n},success:function(n){refresh_confidence(n),n.quiz_difference>0?($("#current_quiz_list").load(" #current_quiz_list",function(){$(this).children().unwrap()}),$("#page-content-wrapper").load(" #page-content-wrapper",function(){$(this).children().unwrap()}),$.notify("quiz closed")):n.quiz_difference<0&&($("#current_quiz_list").load(" #current_quiz_list",function(){$(this).children().unwrap()}),$("#page-content-wrapper").load(" #page-content-wrapper",function(){$(this).children().unwrap()}),$.notify("new quiz available"))},error:function(){}})}function vote(n){n="undefined"!=typeof n?{vote:n}:{},$.ajax({type:"GET",url:"/vote/",dataType:"json",data:n,success:function(n){refresh_confidence(n)},error:function(){}})}function addClickHandlers(){$("#good-btn").click(function(){vote(1)}),$("#neutral-btn").click(function(){vote(0)}),$("#bad-btn").click(function(){vote(-1)})}$("#menu-toggle").click(function(n){n.preventDefault(),$("#wrapper").toggleClass("toggled"),$("#toggle-arrow").toggleClass("glyphicon glyphicon-chevron-right white glyphicon glyphicon-chevron-left white")}),$(document).ready(addClickHandlers);