function plot_confidence(e){flot_data=[],Object.keys(e).forEach(function(t){var a=e[t];color="","good_confidence_meter_data"==t&&(color="#5cb85c",flot_data.push({label:"good",data:a,color:color}),$("#good_confidence_meter_data").html("Good: "+e[t])),"neutral_confidence_meter_data"==t&&(color="#f0ad4e",flot_data.push({label:"neutral",data:a,color:color}),$("#neutral_confidence_meter_data").html("Neutral: "+e[t])),"bad_confidence_meter_data"==t&&(color="#d9534f",flot_data.push({label:"bad",data:a,color:color}),$("#bad_confidence_meter_data").html("Bad: "+e[t])),"bad_left"==t&&$("#bad-seat-location-left").html(e[t]),"bad_middle"==t&&$("#bad-seat-location-middle").html(e[t]),"bad_right"==t&&$("#bad-seat-location-right").html(e[t])}),$.plot("#confidence-graph",flot_data,{series:{pie:{show:!0,radius:1,label:{show:!0,radius:.75,background:{opacity:.5,color:"#000"}}}}})}function update_confidence_messages(e){html="";for(var t=0;t<e.length;t++)(null!=e[t].confidence_message||null!=e[t].user)&&(html+="<tr><td>"+e[t].user+"</td><<td>"+e[t].confidence_message+"</td></tr>");$("#confidence-messages").html(html)}function quick_update(e,t,a){data={csrfmiddlewaretoken:a,quick_settings:"Submit"},data[e]=t,$.ajax({type:"POST",url:"/quick_update/",dataType:"json",data:data,success:function(e){"lecture"==e.return_type&&$("#quick-settings-panel").load(" #quick-settings-panel",function(){$(this).children().unwrap()}),"quiz_close"==e.return_type&&$("#quick-settings-panel").load(" #quick-settings-panel",function(){$(this).children().unwrap()}),"quiz_open"==e.return_type&&$("#quick-settings-panel").load(" #quick-settings-panel",function(){$(this).children().unwrap()}),"undefined"!=typeof e.notice&&(close_button='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>',$("#admin_alerts").html('<div class="alert alert-success alert-dismissable" role="alert">'+e.notice+close_button+"</div>"))},error:function(){}})}function minimize_panel(e,t){var a=document.getElementById(e);$(a).slideToggle();var n=document.getElementById(t);$(n).toggleClass("glyphicon glyphicon-chevron-down glyphicon glyphicon-chevron-up")}var ping_interval=1e3;setInterval(function(){$.ajax({type:"GET",url:"/admin_poll/",dataType:"json",success:function(e){plot_confidence({good_confidence_meter_data:e.good_confidence_meter_data,neutral_confidence_meter_data:e.neutral_confidence_meter_data,bad_confidence_meter_data:e.bad_confidence_meter_data,bad_left:e.bad_left,bad_middle:e.bad_middle,bad_right:e.bad_right}),update_confidence_messages(e.confidence_messages)},error:function(){}}),$("#footer-div").load(" #footer-div",function(){$(this).children().unwrap()})},ping_interval);